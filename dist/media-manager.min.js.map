{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 2c370d473ae0d109dc51","webpack:///./src/media-manager.js","webpack:///./node_modules/deepmerge/dist/cjs.js","webpack:///./src/media-manager.sass","webpack:///./src/utilities/css.js","webpack:///./src/utilities/array.js","webpack:///./src/utilities/typeof.js"],"names":["MediaManager","settings","wrapper","document","createElement","classList","add","classes","header","title","headerTitle","text","createTextNode","names","appendChild","uploadButton","setAttribute","actionBar","contentWrapper","resources","source","map","path","resource","gridItem","item","dataset","src","style","backgroundImage","backgroundSize","backgroundRepeat","forEach","x","footer","confirmButton","cancelButton","overlaySection","overlay","overlaySelector","querySelector","_buildOverlay","mediaManagerIsShown","_appendOverlayIfNotPresent","toggle","activeOverlay","state","isShown","elements","innerHTML","showOverlay","_toggleOverlay","_deleteMediaManager","buildWrapper","_buildHeader","_buildActionBar","_buildResourcePreviews","_buildFooter","_registerEventListenersForMediaActions","_registerEventListenersForActionBar","uploadSelector","addEventListener","events","onFileSelectionChanged","selectedResources","target","contains","hasSelectedMaxItems","length","maxSelectedItems","hasBeenSelected","filter","activeItem","find","confirmSelector","cancelSelector","onConfirm","_toggleMediaManager","evt","preventDefault","onCancel","eventName","callback","hasOwnProperty","_isValidResource","console","error","wrapperSelector","contentWrapperSelector","outerHTML","selectorTypeIndicators","addClassesToNode","node","startsWithSelectorTypeIndicator","selector","startsWith","mergeSelectors","join","createClassSelector","c","createSelector","toArray","items","isString","object"],"mappings":"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","file":"media-manager.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"mediaManager\"] = factory();\n\telse\n\t\troot[\"mediaManager\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 2c370d473ae0d109dc51","import merge from 'deepmerge'\nimport './media-manager.sass'\n\nimport { addClassesToNode, createSelector } from './utilities/css'\n\nexport default class MediaManager {\n  buildWrapper () {\n    const settings = this.settings\n\n    let wrapper = document\n      .createElement('section')\n\n    wrapper.classList.add(settings.classes.wrapper)\n\n    return wrapper\n  }\n\n  _buildHeader () {\n    const settings = this.settings\n\n    const header = document.createElement('section')\n    header.classList.add(settings.classes.header)\n\n    const title = document.createElement('p')\n    title.classList.add(settings.classes.headerTitle)\n\n    const text = document.createTextNode(settings.names.title)\n\n    title.appendChild(text)\n\n    header.appendChild(title)\n\n    return header\n  }\n\n  _buildActionBar () {\n    const settings = this.settings\n\n    let uploadButton = document.createElement('input')\n    uploadButton.setAttribute('type', 'file')\n\n    uploadButton = addClassesToNode(uploadButton, settings.classes.uploadButton)\n    uploadButton.appendChild(document.createTextNode('Upload'))\n\n    let actionBar = document.createElement('section')\n    actionBar = addClassesToNode(actionBar, settings.classes.actionBar)\n    actionBar.appendChild(uploadButton)\n\n    return actionBar\n  }\n\n  _buildResourcePreviews () {\n    const settings = this.settings\n\n    const wrapper = document.createElement('section')\n    wrapper.classList.add(settings.classes.contentWrapper)\n\n    const resources = settings.source.resources.map(resource => {\n      const path = resource.path\n\n      const gridItem = document.createElement('section')\n      gridItem.classList.add(settings.classes.item)\n      gridItem.dataset.src = path\n\n      gridItem.style.backgroundImage = `url('${path}')`\n      gridItem.style.backgroundSize = 'cover'\n      gridItem.style.backgroundRepeat = 'no-repeat'\n\n      return gridItem\n    })\n\n    resources.forEach(x => wrapper.appendChild(x))\n\n    return wrapper\n  }\n\n  _buildFooter () {\n    const settings = this.settings\n    const footer = document.createElement('section')\n    footer.classList.add(settings.classes.footer)\n\n    let confirmButton = document.createElement('button')\n    confirmButton.setAttribute('type', 'button')\n    confirmButton = addClassesToNode(confirmButton, settings.classes.confirmButton)\n    confirmButton.appendChild(document.createTextNode('Confirm'))\n\n    let cancelButton = document.createElement('button')\n    cancelButton.setAttribute('type', 'button')\n    cancelButton = addClassesToNode(cancelButton, settings.classes.cancelButton)\n    cancelButton.appendChild(document.createTextNode('Cancel'))\n\n    footer.appendChild(confirmButton)\n    footer.appendChild(cancelButton)\n\n    return footer\n  }\n\n  _buildOverlay () {\n    let overlaySection = document.createElement('section')\n    overlaySection = addClassesToNode(overlaySection, this.settings.classes.overlay)\n\n    return overlaySection\n  }\n\n  _appendOverlayIfNotPresent () {\n    const overlaySelector = document.querySelector(createSelector(this.settings.classes.overlay))\n    if (overlaySelector !== null) return\n\n    const overlay = this._buildOverlay()\n\n    document.querySelector('body').appendChild(overlay)\n  }\n\n  _toggleOverlay (mediaManagerIsShown) {\n    this._appendOverlayIfNotPresent()\n    const overlaySelector = document.querySelector(createSelector(this.settings.classes.overlay))\n\n    overlaySelector.classList.toggle(this.settings.classes.activeOverlay, mediaManagerIsShown)\n  }\n\n  _deleteMediaManager () {\n    this.settings.state.isShown = false\n    this.settings.elements.wrapper.innerHTML = ''\n  }\n\n  _toggleMediaManager () {\n    const settings = this.settings\n    const {isShown} = settings.state\n\n    if (settings.settings.showOverlay) {\n      this._toggleOverlay(!isShown)\n    }\n\n    if (isShown) return this._deleteMediaManager(settings)\n\n    const wrapper = this.buildWrapper()\n\n    wrapper.appendChild(this._buildHeader())\n    wrapper.appendChild(this._buildActionBar())\n    wrapper.appendChild(this._buildResourcePreviews())\n    wrapper.appendChild(this._buildFooter())\n\n    settings.elements.wrapper.appendChild(wrapper)\n\n    this._registerEventListenersForMediaActions()\n    this._registerEventListenersForActionBar()\n\n    this.settings.state.isShown = true\n  }\n\n  _registerEventListenersForActionBar () {\n    const settings = this.settings\n    const uploadSelector = createSelector(settings.classes.uploadButton)\n\n    document.querySelector(uploadSelector).addEventListener('change', settings.events.onFileSelectionChanged)\n  }\n\n  _registerEventListenersForMediaActions () {\n    const settings = this.settings\n    let selectedResources = []\n\n    settings.elements.wrapper.addEventListener('click', ({target}) => {\n      if (target.classList.contains(settings.classes.item)) {\n        const hasSelectedMaxItems = selectedResources.length === settings.settings.maxSelectedItems\n\n        const path = target.dataset.src\n        const hasBeenSelected = selectedResources.filter(resource => resource.path === path).length > 0\n\n        if (hasBeenSelected) {\n          selectedResources = selectedResources.filter(resource => resource.path !== path)\n\n          target.classList.toggle(settings.classes.activeItem, false)\n        } else if (!hasSelectedMaxItems) {\n          selectedResources = [\n            ...selectedResources,\n            settings.source.resources.find(resource => resource.path === path)\n          ]\n\n          target.classList.toggle(settings.classes.activeItem, true)\n        }\n\n      }\n    })\n\n    const confirmSelector = createSelector(settings.classes.confirmButton)\n    const cancelSelector = createSelector(settings.classes.cancelButton)\n\n    document.querySelector(confirmSelector).addEventListener('click', () => {\n      settings.events.onConfirm(selectedResources)\n      this._toggleMediaManager()\n    })\n\n    document.querySelector(cancelSelector).addEventListener('click', evt => {\n      evt.preventDefault()\n      settings.events.onCancel()\n      this._toggleMediaManager()\n    })\n  }\n\n  on (eventName, callback) {\n    this.settings.events[eventName] = callback\n  }\n\n  toggle () {\n    this._toggleMediaManager()\n  }\n\n  _isValidResource (resource) {\n    return typeof resource === 'object' && resource.hasOwnProperty('path')\n  }\n\n  add (resource) {\n    if (!this._isValidResource(resource)) return console.error('The resource has to be an object with a path key.')\n    const {wrapper, contentWrapper} = this.settings.classes\n\n    const wrapperSelector = createSelector(wrapper)\n    const contentWrapperSelector = createSelector(contentWrapper)\n\n    this.settings.source.resources = [...this.settings.source.resources, resource]\n\n    if (this.settings.state.isShown) {\n      document.querySelector(`${wrapperSelector} ${contentWrapperSelector}`).outerHTML = this._buildResourcePreviews().outerHTML\n    }\n  }\n\n  init (settings) {\n    settings = merge({\n      elements: {\n        wrapper: ''\n      },\n      state: {\n        isShown: false\n      },\n      settings: {\n        showOverlay: true,\n        maxSelectedItems: -1\n      },\n      classes: {\n        wrapper: 'media-manager',\n        overlay: 'media-manager__overlay',\n        activeOverlay: 'media-manager__overlay--active',\n        header: 'media-manager__header',\n        headerTitle: 'media-manager__title',\n        contentWrapper: 'media-manager__content',\n        item: 'media-manager__item',\n        activeItem: 'media-manager__item--active',\n        footer: 'media-manager__footer',\n        actionBar: 'media-manager__action-bar',\n        confirmButton: ['media-manager__button', 'media-manager__button--confirm'],\n        cancelButton: ['media-manager__button', 'media-manager__button--cancel'],\n        uploadButton: ['media-manager__button', 'media-manager__button--upload']\n      },\n      names: {\n        title: 'Media Manager'\n      },\n      events: {\n        onCancel: () => {},\n        onConfirm: () => {},\n        onFileSelectionChanged: () => {}\n      },\n      source: {\n        resources: []\n      }\n    }, settings)\n\n    this.settings = settings\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/media-manager.js","'use strict';\n\nvar isMergeableObject = function isMergeableObject(value) {\n\treturn isNonNullObject(value)\n\t\t&& !isSpecial(value)\n};\n\nfunction isNonNullObject(value) {\n\treturn !!value && typeof value === 'object'\n}\n\nfunction isSpecial(value) {\n\tvar stringValue = Object.prototype.toString.call(value);\n\n\treturn stringValue === '[object RegExp]'\n\t\t|| stringValue === '[object Date]'\n\t\t|| isReactElement(value)\n}\n\n// see https://github.com/facebook/react/blob/b5ac963fb791d1298e7f396236383bc955f916c1/src/isomorphic/classic/element/ReactElement.js#L21-L25\nvar canUseSymbol = typeof Symbol === 'function' && Symbol.for;\nvar REACT_ELEMENT_TYPE = canUseSymbol ? Symbol.for('react.element') : 0xeac7;\n\nfunction isReactElement(value) {\n\treturn value.$$typeof === REACT_ELEMENT_TYPE\n}\n\nfunction emptyTarget(val) {\n    return Array.isArray(val) ? [] : {}\n}\n\nfunction cloneIfNecessary(value, optionsArgument) {\n    var clone = optionsArgument && optionsArgument.clone === true;\n    return (clone && isMergeableObject(value)) ? deepmerge(emptyTarget(value), value, optionsArgument) : value\n}\n\nfunction defaultArrayMerge(target, source, optionsArgument) {\n    var destination = target.slice();\n    source.forEach(function(e, i) {\n        if (typeof destination[i] === 'undefined') {\n            destination[i] = cloneIfNecessary(e, optionsArgument);\n        } else if (isMergeableObject(e)) {\n            destination[i] = deepmerge(target[i], e, optionsArgument);\n        } else if (target.indexOf(e) === -1) {\n            destination.push(cloneIfNecessary(e, optionsArgument));\n        }\n    });\n    return destination\n}\n\nfunction mergeObject(target, source, optionsArgument) {\n    var destination = {};\n    if (isMergeableObject(target)) {\n        Object.keys(target).forEach(function(key) {\n            destination[key] = cloneIfNecessary(target[key], optionsArgument);\n        });\n    }\n    Object.keys(source).forEach(function(key) {\n        if (!isMergeableObject(source[key]) || !target[key]) {\n            destination[key] = cloneIfNecessary(source[key], optionsArgument);\n        } else {\n            destination[key] = deepmerge(target[key], source[key], optionsArgument);\n        }\n    });\n    return destination\n}\n\nfunction deepmerge(target, source, optionsArgument) {\n    var sourceIsArray = Array.isArray(source);\n    var targetIsArray = Array.isArray(target);\n    var options = optionsArgument || { arrayMerge: defaultArrayMerge };\n    var sourceAndTargetTypesMatch = sourceIsArray === targetIsArray;\n\n    if (!sourceAndTargetTypesMatch) {\n        return cloneIfNecessary(source, optionsArgument)\n    } else if (sourceIsArray) {\n        var arrayMerge = options.arrayMerge || defaultArrayMerge;\n        return arrayMerge(target, source, optionsArgument)\n    } else {\n        return mergeObject(target, source, optionsArgument)\n    }\n}\n\ndeepmerge.all = function deepmergeAll(array, optionsArgument) {\n    if (!Array.isArray(array) || array.length < 2) {\n        throw new Error('first argument should be an array with at least two elements')\n    }\n\n    // we are sure there are at least 2 values, so it is safe to have no initial value\n    return array.reduce(function(prev, next) {\n        return deepmerge(prev, next, optionsArgument)\n    })\n};\n\nvar deepmerge_1 = deepmerge;\n\nmodule.exports = deepmerge_1;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/deepmerge/dist/cjs.js\n// module id = 1\n// module chunks = 0","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/media-manager.sass\n// module id = 2\n// module chunks = 0","import { toArray } from './array'\nimport { isString } from './typeof'\n\nconst selectorTypeIndicators = ['.', '#']\n\nexport const addClassesToNode = (node, classes) => {\n  classes = toArray(classes)\n  node.classList.add(...classes)\n\n  return node\n}\n\nconst startsWithSelectorTypeIndicator = selector => {\n  return selectorTypeIndicators.filter(x => selector.startsWith(x)).length > 0\n}\n\nexport const mergeSelectors = classes => classes.join('')\n\nexport const createClassSelector = selector => {\n  if (isString(selector)) {\n    return startsWithSelectorTypeIndicator(selector) ? selector : `.${selector}`\n  }\n\n  return selector.map(c => startsWithSelectorTypeIndicator(c) ? c : `.${c}`)\n}\n\nexport const createSelector = classes => {\n  return mergeSelectors(createClassSelector(toArray(classes)))\n}\n\nexport default {addClassesToNode, mergeSelectors, createClassSelector}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utilities/css.js","export const toArray = items => typeof items === 'string' ? [items] : items\n\nexport default {toArray}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utilities/array.js","export const isString = object => typeof object === 'string'\n\nexport default {isString}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utilities/typeof.js"],"sourceRoot":""}