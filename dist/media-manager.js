!function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=t.toArray=function(e){return"string"==typeof e?[e]:e};t.default={toArray:r}},function(e,t,n){n(2),e.exports=n(6)},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.MediaManager=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(3),i=function(e){return e&&e.__esModule?e:{default:e}}(s),c=(n(0),n(4)),u=t.MediaManager=function(){function e(){a(this,e)}return o(e,[{key:"buildWrapper",value:function(){var e=this.settings,t=document.createElement("section");return t.classList.add(e.classes.wrapper),t}},{key:"_buildHeader",value:function(){var e=this.settings,t=document.createElement("section");t.classList.add(e.classes.header);var n=document.createElement("p");n.classList.add(e.classes.headerTitle);var r=document.createTextNode(e.names.title);return n.appendChild(r),t.appendChild(n),t}},{key:"_buildActionBar",value:function(){var e=this.settings,t=document.createElement("input");t.setAttribute("type","file"),t=(0,c.addClassesToNode)(t,e.classes.uploadButton),t.appendChild(document.createTextNode("Upload"));var n=document.createElement("section");return n=(0,c.addClassesToNode)(n,e.classes.actionBar),n.appendChild(t),n}},{key:"_buildResourcePreviews",value:function(){var e=this.settings,t=document.createElement("section");return t.classList.add(e.classes.contentWrapper),e.source.paths.map(function(t){var n=document.createElement("section");return n.classList.add(e.classes.item),n.dataset.src=t,n.style.backgroundImage="url('"+t+"')",n.style.backgroundSize="cover",n.style.backgroundRepeat="no-repeat",n}).forEach(function(e){return t.appendChild(e)}),t}},{key:"_buildFooter",value:function(){var e=this.settings,t=document.createElement("section");t.classList.add(e.classes.footer);var n=document.createElement("button");n.setAttribute("type","button"),n=(0,c.addClassesToNode)(n,e.classes.confirmButton),n.appendChild(document.createTextNode("Confirm"));var r=document.createElement("button");return r.setAttribute("type","button"),r=(0,c.addClassesToNode)(r,e.classes.cancelButton),r.appendChild(document.createTextNode("Cancel")),t.appendChild(n),t.appendChild(r),t}},{key:"_buildOverlay",value:function(){var e=document.createElement("section");return e=(0,c.addClassesToNode)(e,this.settings.classes.overlay)}},{key:"_appendOverlayIfNotPresent",value:function(){if(null===document.querySelector((0,c.createSelector)(this.settings.classes.overlay))){var e=this._buildOverlay();document.querySelector("body").appendChild(e)}}},{key:"_toggleOverlay",value:function(e){this._appendOverlayIfNotPresent(),document.querySelector((0,c.createSelector)(this.settings.classes.overlay)).classList.toggle(this.settings.classes.activeOverlay,e)}},{key:"_deleteMediaManager",value:function(){this.settings.state.isShown=!1,this.settings.elements.wrapper.innerHTML=""}},{key:"_toggleMediaManager",value:function(){var e=this.settings,t=e.state.isShown;if(e.settings.showOverlay&&this._toggleOverlay(!t),t)return this._deleteMediaManager(e);var n=this.buildWrapper();n.appendChild(this._buildHeader()),n.appendChild(this._buildActionBar()),n.appendChild(this._buildResourcePreviews()),n.appendChild(this._buildFooter()),e.elements.wrapper.appendChild(n),this._registerEventListenersForMediaActions(e),this._registerEventListenersForActionBar(e),this.settings.state.isShown=!0}},{key:"_registerEventListenersForActionBar",value:function(e){var t=(0,c.createSelector)(e.classes.uploadButton);document.querySelector(t).addEventListener("change",e.events.onFileSelectionChanged)}},{key:"_registerEventListenersForMediaActions",value:function(e){var t=this,n=[];e.elements.wrapper.addEventListener("click",function(t){var a=t.target;if(a.classList.contains(e.classes.item)){a.classList.toggle(e.classes.activeItem);var o=a.dataset.src,s=a.classList.contains(e.classes.activeItem);n=s?[].concat(r(n),[o]):n.filter(function(e){return e!==o})}});var a=(0,c.createSelector)(e.classes.confirmButton),o=(0,c.createSelector)(e.classes.cancelButton);document.querySelector(a).addEventListener("click",function(){e.events.onConfirm(n),t._toggleMediaManager()}),document.querySelector(o).addEventListener("click",function(n){n.preventDefault(),e.events.onCancel(),t._toggleMediaManager()})}},{key:"toggle",value:function(){this._toggleMediaManager()}},{key:"add",value:function(e){var t=this.settings.classes,n=t.wrapper,a=t.contentWrapper,o=(0,c.createSelector)(n),s=(0,c.createSelector)(a);this.settings.source.paths=[].concat(r(this.settings.source.paths),[e]),document.querySelector(o+" "+s).outerHTML=this._buildResourcePreviews().outerHTML}},{key:"init",value:function(e){e=(0,i.default)({elements:{wrapper:""},state:{isShown:!1},settings:{showOverlay:!0},classes:{wrapper:"media-manager",overlay:"media-manager__overlay",activeOverlay:"media-manager__overlay--active",header:"media-manager__header",headerTitle:"media-manager__title",contentWrapper:"media-manager__content",item:"media-manager__item",activeItem:"media-manager__item--active",footer:"media-manager__footer",actionBar:"media-manager__action-bar",confirmButton:["media-manager__button","media-manager__button--confirm"],cancelButton:["media-manager__button","media-manager__button--cancel"],uploadButton:["media-manager__button","media-manager__button--upload"]},names:{title:"Media Manager"},events:{onCancel:function(){},onConfirm:function(){},onFileSelectionChanged:function(){}},source:{paths:[]}},e),this.settings=e}}]),e}();t.default=u},function(e,t,n){"use strict";function r(e){return!!e&&"object"===(void 0===e?"undefined":l(e))}function a(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"!==t&&"[object Date]"!==t}function o(e){return Array.isArray(e)?[]:{}}function s(e,t){return t&&!0===t.clone&&d(e)?u(o(e),e,t):e}function i(e,t,n){var r=e.slice();return t.forEach(function(t,a){void 0===r[a]?r[a]=s(t,n):d(t)?r[a]=u(e[a],t,n):-1===e.indexOf(t)&&r.push(s(t,n))}),r}function c(e,t,n){var r={};return d(e)&&Object.keys(e).forEach(function(t){r[t]=s(e[t],n)}),Object.keys(t).forEach(function(a){d(t[a])&&e[a]?r[a]=u(e[a],t[a],n):r[a]=s(t[a],n)}),r}function u(e,t,n){var r=Array.isArray(t),a=Array.isArray(e),o=n||{arrayMerge:i};if(r===a)return r?(o.arrayMerge||i)(e,t,n):c(e,t,n);return s(t,n)}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d=function(e){return r(e)&&a(e)};u.all=function(e,t){if(!Array.isArray(e)||e.length<2)throw new Error("first argument should be an array with at least two elements");return e.reduce(function(e,n){return u(e,n,t)})};var f=u;e.exports=f},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.createSelector=t.createClassSelector=t.mergeSelectors=t.addClassesToNode=void 0;var a=n(0),o=n(5),s=[".","#"],i=t.addClassesToNode=function(e,t){var n;return t=(0,a.toArray)(t),(n=e.classList).add.apply(n,r(t)),e},c=function(e){return s.filter(function(t){return e.startsWith(t)}).length>0},u=t.mergeSelectors=function(e){return e.join("")},l=t.createClassSelector=function(e){return(0,o.isString)(e)?c(e)?e:"."+e:e.map(function(e){return c(e)?e:"."+e})};t.createSelector=function(e){return u(l((0,a.toArray)(e)))};t.default={addClassesToNode:i,mergeSelectors:u,createClassSelector:l}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=t.isString=function(e){return"string"==typeof e};t.default={isString:r}},function(e,t){}]);