!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.mediaManager=t():e.mediaManager=t()}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var a=r[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,r){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(1),c=function(e){return e&&e.__esModule?e:{default:e}}(i);r(2);var u=r(3),l=function(){function e(){a(this,e)}return s(e,[{key:"_buildWrapper",value:function(){var e=this.settings,t=document.createElement("section");return t.classList.add(e.classes.wrapper),t}},{key:"_buildHeader",value:function(){var e=this.settings,t=document.createElement("section");t.classList.add(e.classes.header);var r=document.createElement("p");r.classList.add(e.classes.headerTitle);var n=document.createTextNode(e.names.title);return r.appendChild(n),t.appendChild(r),t}},{key:"_buildActionBar",value:function(){var e=this.settings,t=document.createElement("input");t.setAttribute("type","file"),t=(0,u.addClassesToNode)(t,e.classes.uploadButton),t.appendChild(document.createTextNode("Upload"));var r=document.createElement("section");return r=(0,u.addClassesToNode)(r,e.classes.actionBar),r.appendChild(t),r}},{key:"_buildResourcePreviews",value:function(){var e=this.settings,t=document.createElement("section");return t.classList.add(e.classes.contentWrapper),e.source.resources.map(function(t){var r=t.path,n=document.createElement("section");return n.classList.add(e.classes.item),n.dataset.src=r,n.style.backgroundImage="url('"+r+"')",n.style.backgroundSize="cover",n.style.backgroundRepeat="no-repeat",n}).forEach(function(e){return t.appendChild(e)}),t}},{key:"_buildFooter",value:function(){var e=this.settings,t=document.createElement("section");t.classList.add(e.classes.footer);var r=document.createElement("button");r.setAttribute("type","button"),r=(0,u.addClassesToNode)(r,e.classes.confirmButton),r.appendChild(document.createTextNode("Confirm"));var n=document.createElement("button");return n.setAttribute("type","button"),n=(0,u.addClassesToNode)(n,e.classes.cancelButton),n.appendChild(document.createTextNode("Cancel")),t.appendChild(r),t.appendChild(n),t}},{key:"_buildOverlay",value:function(){var e=document.createElement("section");return e=(0,u.addClassesToNode)(e,this.settings.classes.overlay)}},{key:"_appendOverlayIfNotPresent",value:function(){if(null===document.querySelector((0,u.createSelector)(this.settings.classes.overlay))){var e=this._buildOverlay();document.querySelector("body").appendChild(e)}}},{key:"_toggleOverlay",value:function(e){this._appendOverlayIfNotPresent(),document.querySelector((0,u.createSelector)(this.settings.classes.overlay)).classList.toggle(this.settings.classes.activeOverlay,e)}},{key:"_deleteMediaManager",value:function(){this.settings.state.isShown=!1,this.settings.elements.wrapper.innerHTML=""}},{key:"_toggleMediaManager",value:function(){var e=this.settings,t=e.state.isShown;if(e.settings.showOverlay&&this._toggleOverlay(!t),t)return this._deleteMediaManager(e);var r=this._buildWrapper();r.appendChild(this._buildHeader()),r.appendChild(this._buildActionBar()),r.appendChild(this._buildResourcePreviews()),r.appendChild(this._buildFooter()),e.elements.wrapper.appendChild(r),this._registerEventListenersForMediaActions(),this._registerEventListenersForActionBar(),this.settings.state.isShown=!0}},{key:"_registerEventListenersForActionBar",value:function(){var e=this.settings,t=(0,u.createSelector)(e.classes.uploadButton);document.querySelector(t).addEventListener("change",e.events.onFileSelectionChanged)}},{key:"_registerEventListenersForMediaActions",value:function(){var e=this,t=this.settings,r=[];t.elements.wrapper.addEventListener("click",function(e){var a=e.target;if(a.classList.contains(t.classes.item)){var o=r.length===t.settings.maxSelectedItems,s=a.dataset.src;r.filter(function(e){return e.path===s}).length>0?(r=r.filter(function(e){return e.path!==s}),a.classList.toggle(t.classes.activeItem,!1)):o||(r=[].concat(n(r),[t.source.resources.find(function(e){return e.path===s})]),a.classList.toggle(t.classes.activeItem,!0))}});var a=(0,u.createSelector)(t.classes.confirmButton),o=(0,u.createSelector)(t.classes.cancelButton);document.querySelector(a).addEventListener("click",function(){t.events.onConfirm(r),e._toggleMediaManager()}),document.querySelector(o).addEventListener("click",function(r){r.preventDefault(),t.events.onCancel(),e._toggleMediaManager()})}},{key:"on",value:function(e,t){this.settings.events[e]=t}},{key:"toggle",value:function(){this._toggleMediaManager()}},{key:"_isValidResource",value:function(e){return"object"===(void 0===e?"undefined":o(e))&&e.hasOwnProperty("path")}},{key:"add",value:function(e){if(!this._isValidResource(e))return console.error("The resource has to be an object with a path key.");var t=this.settings.classes,r=t.wrapper,a=t.contentWrapper,o=(0,u.createSelector)(r),s=(0,u.createSelector)(a);this.settings.source.resources=[].concat(n(this.settings.source.resources),[e]),this.settings.state.isShown&&(document.querySelector(o+" "+s).outerHTML=this._buildResourcePreviews().outerHTML)}},{key:"init",value:function(e){e=(0,c.default)({elements:{wrapper:""},state:{isShown:!1},settings:{showOverlay:!0,maxSelectedItems:-1},classes:{wrapper:"media-manager",overlay:"media-manager__overlay",activeOverlay:"media-manager__overlay--active",header:"media-manager__header",headerTitle:"media-manager__title",contentWrapper:"media-manager__content",item:"media-manager__item",activeItem:"media-manager__item--active",footer:"media-manager__footer",actionBar:"media-manager__action-bar",confirmButton:["media-manager__button","media-manager__button--confirm"],cancelButton:["media-manager__button","media-manager__button--cancel"],uploadButton:["media-manager__button","media-manager__button--upload"]},names:{title:"Media Manager"},events:{onCancel:function(){},onConfirm:function(){},onFileSelectionChanged:function(){}},source:{resources:[]}},e),this.settings=e}}]),e}();t.default=l},function(e,t,r){"use strict";function n(e){return!!e&&"object"==typeof e}function a(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||o(e)}function o(e){return e.$$typeof===p}function s(e){return Array.isArray(e)?[]:{}}function i(e,t){return t&&!0===t.clone&&d(e)?l(s(e),e,t):e}function c(e,t,r){var n=e.slice();return t.forEach(function(t,a){void 0===n[a]?n[a]=i(t,r):d(t)?n[a]=l(e[a],t,r):-1===e.indexOf(t)&&n.push(i(t,r))}),n}function u(e,t,r){var n={};return d(e)&&Object.keys(e).forEach(function(t){n[t]=i(e[t],r)}),Object.keys(t).forEach(function(a){d(t[a])&&e[a]?n[a]=l(e[a],t[a],r):n[a]=i(t[a],r)}),n}function l(e,t,r){var n=Array.isArray(t),a=Array.isArray(e),o=r||{arrayMerge:c};if(n===a)return n?(o.arrayMerge||c)(e,t,r):u(e,t,r);return i(t,r)}var d=function(e){return n(e)&&!a(e)},f="function"==typeof Symbol&&Symbol.for,p=f?Symbol.for("react.element"):60103;l.all=function(e,t){if(!Array.isArray(e)||e.length<2)throw new Error("first argument should be an array with at least two elements");return e.reduce(function(e,r){return l(e,r,t)})};var m=l;e.exports=m},function(e,t){},function(e,t,r){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.createSelector=t.createClassSelector=t.mergeSelectors=t.addClassesToNode=void 0;var a=r(4),o=r(5),s=[".","#"],i=t.addClassesToNode=function(e,t){var r;return t=(0,a.toArray)(t),(r=e.classList).add.apply(r,n(t)),e},c=function(e){return s.filter(function(t){return e.startsWith(t)}).length>0},u=t.mergeSelectors=function(e){return e.join("")},l=t.createClassSelector=function(e){return(0,o.isString)(e)?c(e)?e:"."+e:e.map(function(e){return c(e)?e:"."+e})};t.createSelector=function(e){return u(l((0,a.toArray)(e)))};t.default={addClassesToNode:i,mergeSelectors:u,createClassSelector:l}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.toArray=function(e){return"string"==typeof e?[e]:e};t.default={toArray:n}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.isString=function(e){return"string"==typeof e};t.default={isString:n}}])});